!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=388)}({1:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",(function(){return o}));var o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;r(this,e),t||(t={ajax:{beforeSend:function(){frameMgr.showProcessingMessage(MESSAGE_BUNDLE.getKey("core.please.wait"))},complete:function(){frameMgr.removeProcessingMessage()}}}),this.settings={ajax:$.extend({method:"post",headers:{"Content-Type":"application/json"}},t.ajax)}}var t,n,o;return t=e,(n=[{key:"post",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return $.ajax($.extend({},this.settings.ajax,{url:e,data:JSON.stringify(t)},n))}},{key:"put",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return $.ajax($.extend({},this.settings.ajax,{url:e,method:"PUT",data:JSON.stringify(t)},n))}},{key:"postPreparedData",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return $.ajax($.extend({},this.settings.ajax,{url:e,data:t},n))}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return $.ajax($.extend({},this.settings.ajax,{url:e,method:"get"},t))}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return $.ajax($.extend({},this.settings.ajax,{url:e,method:"delete"},t))}},{key:"postMultiPartForm",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return $.ajax($.extend({},this.settings.ajax,{url:e,data:t,processData:!1,contentType:!1,method:"POST"},n))}}])&&a(t.prototype,n),o&&a(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}()},18:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var a=c(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return i(this,n)}}function i(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",(function(){return u}));var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(c,e);var t,n,r,i=s(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this,e)).formData={},t.banks=[],t}return t=c,(n=[{key:"loadBanks",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n="/remita/onepage/cloud/banklist/user/".concat(t?"corporate":"personal","/bank.json"),r=$.Deferred();return $.ajax($.extend({},this.settings.ajax,{url:n,method:"get",success:function(t){try{if(t){var n=JSON.parse($.base64.decode(t));n.responseCode&&"00"==n.responseCode?(e.banks=n.responseData,r.resolve(e.banks)):r.reject(n.responseMsg)}else r.reject("no data")}catch(e){r.reject(e)}},error:function(e){return r.reject(e)}})),r.promise()}},{key:"lookupAccount",value:function(e){e.companyId,this.formData=e;var t=$.Deferred();return $.ajax($.extend({},this.settings.ajax,{url:"/remita/onepage/cloud/acctlookup.json",data:$.base64.encode(JSON.stringify({accountNumber:this.formData.accountNumber,bankCode:this.formData.bankCode,companyId:e.companyId,requestChannel:"WEB"})),success:function(e){if(e){var n=JSON.parse($.base64.decode(e));n.responseCode&&"00"==n.responseCode?t.resolve(n.responseData):t.reject(n.responseMsg)}else t.reject("no data")},error:function(e){return t.reject(e)}})),t.promise()}},{key:"addAccount",value:function(e){var t=$.Deferred();return $.ajax($.extend({},this.settings.ajax,{url:"/remita/company/accounts/".concat(e.readd?"re-add":"add",".reg"),data:JSON.stringify(e),success:function(e){e.responseCode&&"91"==e.responseCode?t.resolve(e.responseData[0]):t.reject(e.responseMsg)},error:function(e){return t.reject(e)}})),t.promise()}},{key:"validateAccount",value:function(e){var t=$.Deferred();return $.ajax($.extend({},this.settings.ajax,{url:"/remita/company/accounts/otp/validate.reg",data:JSON.stringify(e),success:function(e){e?e.responseCode&&"00"===e.responseCode?t.resolve(e):t.reject(e):t.reject({responseMsg:"no data"})},error:function(e){return t.reject(e)}})),t.promise()}},{key:"findPendingAccounts",value:function(){var e=$.Deferred();return $.ajax({method:"post",headers:{"Content-Type":"application/json"},url:"/remita/company/accounts/pending.json",success:function(t){return e.resolve(t)},error:function(t){return e.reject(t)}}),e.promise()}},{key:"requestOtp",value:function(e){return $.ajax($.extend({},this.settings.ajax,{data:JSON.stringify(e),url:"/remita/company/accounts/otp/request.json"}))}},{key:"findUnconfirmedAccounts",value:function(){var e=$.Deferred();return $.ajax($.extend({},this.settings.ajax,{url:"/remita/onepage/cloud/banklist/bank.json",method:"get",success:function(t){if(t){var n=JSON.parse($.base64.decode(t));n.responseCode&&"00"==n.responseCode?e.resolve(n.responseData):e.reject(n.responseMsg)}else e.reject("no data")},error:function(t){return e.reject(t)}})),e.promise()}},{key:"getBankTypeByCode",value:function(e){var t=this,n=$.Deferred();return this.banks?n.resolve(this.retrieveBankTypeByCode(e)):this.loadBanks().then((function(){return n.resolve(t.retrieveBankTypeByCode(e))})),n.promise()}},{key:"retrieveBankTypeByCode",value:function(e){return this.banks.find((function(t){return e===t.bankId})).regAuthType}},{key:"logForPayment",value:function(e){var t=e.rrr,n=e.amount,r=e.channel,a=void 0===r?"card":r;return this.post("/remita/company/accounts/profile/paymentlog.reg",{rrr:t,amount:n,channel:a},{dataType:"text"}).then((function(e){var t=JSON.parse(e);return t&&"00"===t.responseCode&&t.responseData[0]&&t.responseData[0].cardOrderId?t.responseData[0].cardOrderId:$.Deferred().reject(t)}))}},{key:"findAllAccounts",value:function(){return this.get("/remita/company/accounts/available.json")}},{key:"updateAccountStatus",value:function(e){return this.post("/remita/company/accounts/acct-status.json",e).then((function(e){if(e&&"00"===e.responseCode&&e.responseData)return e.responseData[0];throw new Error(e)}))}},{key:"profileAccount",value:function(e){return this.post("/remita/company/accounts/acct-profile.reg",e).then((function(e){if(e&&"00"===e.responseCode&&e.responseData)return e.responseData[0];throw new Error(e)}))}},{key:"callPayment",value:function(e){return this.post("/remita/company/accounts/log.htm",e)}},{key:"checkStatus",value:function(e){return this.get("/remita/company/accounts/transaction/".concat(e,"/index.reg"))}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(n(1).a)},188:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(18);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var a=l(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(u,e);var t,n,r,a=c(u);function u(){return o(this,u),a.apply(this,arguments)}return t=u,(n=[{key:"displayAvsInfo",value:function(e,t){if(this.clearExisitingErrorMessage(),e&&e.length>0){var n=e[0],r=$("[data-avs-content='".concat(t,"']"));if(r.length>0)r.find("img").prop("src","/remita/images/".concat(n.bankCode,".png")),r.find(".avs-name__detail").html(n.nameOnAccount),r.find(".avs-account__detail").html(n.bvnAccountNo);else{var a='\n                <div data-avs-content="'.concat(t,'">\n                    <span class="avs-logo">\n                        <img src="/remita/images/').concat(n.bankCode,'.png" height="30"/>\n                    </span>\n                    <div class="avs-name">\n                        <div><span class="avs-name__label">Account Name:</span> <span class="avs-name__detail">').concat(n.nameOnAccount,'</span></div>\n                        <div><span class="avs-name__label">Account Number:</span> <span class="avs-account__detail">').concat(n.bvnAccountNo,"</span></div>\n                    </div>\n                </div>\n            ");$("[data-avs-info='".concat(t,"']")).length>0?$("[data-avs-info='".concat(t,"']")).html(a):$("[data-dynamic-avs-container]").length>0?$("[data-dynamic-avs-container]").html(a):$(a).insertAfter("[data-avs-account='".concat(t,"']"))}}else this.displayError("core.avs.not.found",t)}},{key:"displayError",value:function(e,t){var n=MESSAGE_BUNDLE.getKey(e),r=$("[data-avs-content='".concat(t,"']"));r.length>0&&r.remove();var a="<div><small class=\"text-danger\" id='_avs_err_msg'>".concat(n,"</small></div>");$("[data-avs-info='".concat(t,"']")).length>0?$("[data-avs-info='".concat(t,"']")).html(a):0==$("#_avs_err_msg").length?$(a).insertAfter("[data-avs-account='".concat(t,"']")):$("#_avs_err_msg").val(n)}},{key:"clearExisitingErrorMessage",value:function(){var e=$("#_avs_err_msg");e.length>0&&e.remove()}}])&&s(t.prototype,n),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(n(2).a);function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var v=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.service=new r.a({}),this.view=new f,this.isVerifyingAccount=!1,this.resolvedAccount=null}var t,n,a;return t=e,(n=[{key:"registerEvents",value:function(){var e=this;0===$("[data-avs-off]").length&&0===$("[avs-off]").length&&(0===$("[data-avs-validate-element]").length?($(document).on("blur","[data-avs-account]",(function(t){return e.handleAvsEvent(t,"avs-account")})),this.initBankElementEvent()):($(document).on("change","[data-avs-bank-id]",(function(t){e.handleAvsEvent(t,"avs-bank"),$("[data-avs-account-id]").valid()})),$(document).on("blur","[data-avs-account-id]",(function(e){$("[data-avs-bank-id]").trigger("change")}))),this.handleAvsRequiredForFormValidation())}},{key:"handleAvsEvent",value:function(e,t){var n=$(e.target).data(t);this.onInitLookUp(),this.lookUpAccount(n)}},{key:"lookUpAccount",value:function(e){var t=$("[data-avs-bank='".concat(e,"']")).hasClass("error"),n=$("[data-avs-account='".concat(e,"']")).hasClass("error");if(t||n)return $.Deferred().reject("error in inputs");var r=document.querySelector("[data-avs-bank='".concat(e,"']")),a=null;return r&&(a=r.dataset.autoKey),this.doLookUpAccount(e,{bankCode:a||$("[data-avs-bank='".concat(e,"']")).val(),accountNumber:$("[data-avs-account='".concat(e,"']")).val()})}},{key:"doLookUpAccount",value:function(e,t){var n=this,r=t.bankCode,a=t.accountNumber,o={bankCode:r,accountNumber:a},s=$("[data-avs-company-id]").data("avs-company-id");if(s){var i=$("[data-avs-company-id]").data("bankcode");i&&(o.bankCode=i),o.companyId=s}return a&&r?this.service.lookupAccount(o).then((function(t){var r=Array.isArray(t)?t[0]:null;return s&&$(document).trigger("custom:eNairaNameValidation",[!0]),n.onCompleteLookUp(r),n.view.displayAvsInfo(t,e),t}),(function(t){return s&&$(document).trigger("custom:eNairaNameValidation",[!1]),n.onCompleteLookUp(null),n.view.displayError((null==t?void 0:t.message)||("string"==typeof t?t:"core.avs.failed"),e),$.Deferred().reject(t)})):$.Deferred().reject("Invalid")}},{key:"handleAvsRequiredForFormValidation",value:function(){var e=$("[data-avs-validate-element]");if(0!==e.length&&"delay"!==e.attr("data-avs-validate-element")){var t=$("[data-avs-bank-id]").prop("id"),n=$("[data-avs-account-id]").prop("id");e.rules("add",{remote:{url:"/remita/avs/validate/acctlookup.json",type:"post",data:{requestChannel:function(){return"WEB"},accountNumber:function(){return $.trim($("#".concat(n)).val())},bankCode:function(){return $.trim($("#".concat(t)).val())}}},messages:{remote:MESSAGE_BUNDLE["core.account.could.not.be.validated"]}})}}},{key:"initBankElementEvent",value:function(){var e=this;0===$("[data-custom-trigger]").length?$(document).on("change","[data-avs-bank]",(function(t){return e.handleAvsEvent(t,"avs-bank")})):$(document).on("retrieve:avs-details",(function(t){e.handleAvsEvent(t,"avs-bank")}))}},{key:"onInitLookUp",value:function(){this.isVerifyingAccount=!0,this.resolvedAccount=null}},{key:"onCompleteLookUp",value:function(e){this.isVerifyingAccount=!1,this.resolvedAccount=e}}])&&d(t.prototype,n),a&&d(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.b=new v},2:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",(function(){return a}));var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init()}var t,n,a;return t=e,(n=[{key:"init",value:function(){}},{key:"showError",value:function(e){this.showMessage(e,!1)}},{key:"showDefaultErrorMessage",value:function(){return this.showMessage(MESSAGE_BUNDLE.getKey("core.default.error.message"),!1),!1}},{key:"showModalError",value:function(e){$(".modal-message").html(MESSAGE_BUNDLE.getKey(e)).removeClass("hidden")}},{key:"hideModalError",value:function(){$(".modal-message").html("").addClass("hidden")}},{key:"showSuccess",value:function(e){this.showMessage(e,!0)}},{key:"showDefaultSuccessMessage",value:function(){return this.showMessage(MESSAGE_BUNDLE.getKey("core.default.success.message"),!0),!0}},{key:"showMessage",value:function(e,t){frameMgr.showMessage(MESSAGE_BUNDLE.getKey(e),t)}},{key:"getField",value:function(e,t){return e&&e.toString().trim()?e:t&&""!==t.trim()?t:MESSAGE_BUNDLE.getKey("core.na")}},{key:"getDateField",value:function(e,t){try{return e&&e.toString().trim()?moment(e).format("MMMM Do YYYY, h:mm:ss a"):this.getField(t)}catch(e){}return t}},{key:"confirm",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return confirm(MESSAGE_BUNDLE.getKey(e))}))},{key:"loadTemplate",value:function(e,t){var n=$.Deferred();return $.ajax({url:"/remita/res/app-resources/".concat(e),method:"get",success:function(e){return n.resolve(Handlebars.compile(e)(t))},error:function(e){return n.reject(e)}}),n.promise()}},{key:"hideDefaultSuccessMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3;setTimeout((function(){$("#sys-message-holder.alert-success").slideUp("fast",(function(){$(this).removeClass("alert-success").slideDown().addClass("hidden")}))}),e)}},{key:"hideDefaultErrorMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3;setTimeout((function(){$("#sys-message-holder.alert-danger").slideUp("fast",(function(){$(this).removeClass("alert-danger").slideDown().addClass("hidden")}))}),e)}},{key:"hideParamSuccessMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3;setTimeout((function(){$(".param-alert.alert-success").slideUp("fast",(function(){$(this).removeClass("alert-success").slideDown().addClass("hidden")}))}),e)}},{key:"hideParamErrorMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3;setTimeout((function(){$(".param-alert.alert-danger").slideUp("fast",(function(){$(this).removeClass("alert-danger").slideDown().addClass("hidden")}))}),e)}}])&&r(t.prototype,n),a&&r(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}()},388:function(e,t,n){"use strict";n.r(t);var r=n(188);window.avs=new r.a,window.avs.registerEvents()}});